import importlib

import __cv2_cv2 as cv2
from .data import *

# wildcard import above does not import "private" variables like __version__
# this makes them available
globals().update(cv2.__dict__)


def imshow_image(title, image):
    from PIL import Image
    from io import BytesIO
    from pyto import QuickLookHelper
    import base64
    
    image = Image.fromarray(image)
    buffered = BytesIO()
    image.save(buffered, format="JPEG")
    img_str = base64.b64encode(buffered.getvalue()).decode("utf-8")
    
    try:
        QuickLookHelper.previewFile(img_str, script=threading.current_thread().script_path, removePrevious=True)
    except:
        QuickLookHelper.previewFile(img_str, script=None, removePrevious=True)
    
imshow = imshow_image
