#!/bin/bash

rm -rf compiled/*

rsync -av . compiled/ --exclude={compiled,OnDemandLibraries.plist,compile.sh}

find compiled -name "*.py" -exec python3.8 -c "from os.path import splitext; from py_compile import compile; compile('{}', splitext('{}')[0]+'.pyc')" \;

find compiled -name "*.py" -delete
find compiled -name "*.pyx" -delete
find compiled -name "*.pxd" -delete
